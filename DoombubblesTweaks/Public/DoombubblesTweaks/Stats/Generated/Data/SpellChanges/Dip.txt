new entry "Target_Dip"
type "SpellData"
data "SpellType" "Target"
using "Target_Dip"
data "SpellProperties" "GROUND:IF(Surface('SurfaceFire') and WieldingWeapon('Dippable',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,DIPPED_FIRE_SWITCH,100,0);GROUND:IF(Surface('SurfaceFire') and WieldingWeapon('Dippable',true,false,context.Source)):ApplyEquipmentStatus(SELF,OffHand,DIPPED_FIRE_SWITCH,100,0);TARGET:IF((HasStatus('BURNING') or HasStatus('FLAMING_SPHERE_AURA') or Tagged('REALLY_KARLACH') or HasStatus('FIRE_SHIELD_CHILL')) and WieldingWeapon('Dippable',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,DIPPED_FIRE_SWITCH,100,0);TARGET:IF((HasStatus('BURNING') or HasStatus('FLAMING_SPHERE_AURA') or Tagged('REALLY_KARLACH') or HasStatus('FIRE_SHIELD_CHILL')) and WieldingWeapon('Dippable',true,false,context.Source)): ApplyEquipmentStatus(SELF,OffHand,DIPPED_FIRE_SWITCH,100,0);GROUND:IF(Surface('SurfaceHellfire') and WieldingWeapon('Dippable',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,DIPPED_FIRE_SWITCH,100,0);GROUND:IF(Surface('SurfaceHellfire') and WieldingWeapon('Dippable',true,false,context.Source)):ApplyEquipmentStatus(SELF,OffHand,DIPPED_FIRE_SWITCH,100,0);GROUND:IF(Surface('SurfacePoison') and WieldingWeapon('Dippable',false,false,context.Source) and not WieldingWeapon('Torch',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,ALCH_TOXIN_BASIC_DIPPED,100,10);GROUND:IF(Surface('SurfacePoison') and WieldingWeapon('Dippable',true,false,context.Source) and not WieldingWeapon('Torch',true,false,context.Source)):ApplyEquipmentStatus(SELF,OffHand,ALCH_TOXIN_BASIC_DIPPED,100,10);GROUND:IF(Surface('SurfaceSerpentVenom') and WieldingWeapon('Dippable',false,false,context.Source) and not WieldingWeapon('Torch',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,TOXIN_SERPENTVENOM_DIPPED,100,10);GROUND:IF(Surface('SurfaceSerpentVenom') and WieldingWeapon('Dippable',true,false,context.Source) and not WieldingWeapon('Torch',true,false,context.Source)):ApplyEquipmentStatus(SELF,OffHand,TOXIN_SERPENTVENOM_DIPPED,100,10);GROUND:IF(Surface('SurfaceWyvernPoison') and WieldingWeapon('Dippable',false,false,context.Source) and not WieldingWeapon('Torch',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,TOXIN_WYVERN_DIPPED,100,10);GROUND:IF(Surface('SurfaceWyvernPoison') and WieldingWeapon('Dippable',true,false,context.Source) and not WieldingWeapon('Torch',true,false,context.Source)):ApplyEquipmentStatus(SELF,OffHand,TOXIN_WYVERN_DIPPED,100,10);GROUND:IF(Surface('SurfacePurpleWormPoison') and WieldingWeapon('Dippable',false,false,context.Source) and not WieldingWeapon('Torch',false,false,context.Source)):ApplyEquipmentStatus(SELF,MainHand,TOXIN_PURPLEWORM_DIPPED,100,10);GROUND:IF(Surface('SurfacePurpleWormPoison') and WieldingWeapon('Dippable',true,false,context.Source) and not WieldingWeapon('Torch',true,false,context.Source)):ApplyEquipmentStatus(SELF,OffHand,TOXIN_PURPLEWORM_DIPPED,100,10);GROUND:IF(Surface('SurfaceWater') and WieldingWeapon('Dippable',false,false,context.Source)): ApplyEquipmentStatus(SELF,MainHand,DIPPED_WATER,100,0);GROUND:IF(Surface('SurfaceWater') and WieldingWeapon('Dippable',true,false,context.Source)): ApplyEquipmentStatus(SELF,OffHand,DIPPED_WATER,100,0);GROUND:DealDamage(MainMeleeWeapon,MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);GROUND:DealDamage(OffhandMeleeWeapon,MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(OffHand)"
data "TargetConditions" "IsDippableSurface() or IsOnFire() or Tagged('REALLY_KARLACH') or HasStatus('FIRE_SHIELD_CHILL')"

new entry "DIPPED_FIRE_SWITCH"
type "StatusData"
data "StatusType" "BOOST"
using "DIPPED_FIRE_SWITCH"
// data "OnApplyFunctors" "IF(Tagged('TORCH')):ApplyStatus(BURNING,100,-1);IF(not Tagged('TORCH')):ApplyStatus(DIPPED_FIRE,100,10);"