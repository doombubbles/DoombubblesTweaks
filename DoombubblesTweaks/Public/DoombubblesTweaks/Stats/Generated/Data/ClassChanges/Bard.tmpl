
new entry "Target_BardicInspiration_Combat"
type "SpellData"
data "SpellType" "Target"
using "Target_BardicInspiration_Combat"
data "ExtraDescription" "hc8b6097fg0cb4g4cf6g96e1g866e3222fa0f"
data "SpellProperties" "IF(not CharacterLevelGreaterThan(4)):ApplyStatus(BARDIC_INSPIRATION_COMBAT,100, -1);IF(CharacterLevelGreaterThan(4) and not CharacterLevelGreaterThan(9)):ApplyStatus(BARDIC_INSPIRATION_COMBAT_D8,100, -1);IF(CharacterLevelGreaterThan(9)):ApplyStatus(BARDIC_INSPIRATION_COMBAT_D10,100, -1)"

new entry "Interrupt_CombatInspiration_Damage"
type "InterruptData"
using "Interrupt_CombatInspiration_Damage"
data "InterruptDefaultValue" "Enabled;Ask"

new entry "Interrupt_CombatInspiration_Attack"
type "InterruptData"
using "Interrupt_CombatInspiration_Attack"
data "InterruptDefaultValue" "Enabled;Ask"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
type "InterruptData"
using "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
data "InterruptDefaultValue" "Enabled;Ask"

new entry "CombatInspiration_Ability"
type "PassiveData"
using "CombatInspiration_Ability"
data "Properties" "IsToggled;Temporary"

new entry "CombatInspiration_Ability_d8"
type "PassiveData"
using "CombatInspiration_Ability_d8"
data "Properties" "IsToggled;Temporary"

{{- $dice := dict "1d6" "" "1d8" "_D8" "1d10" "_D10" -}}
{{- $flourishes := list "Zone_BladeFlourish_Slashing" "Projectile_BladeFlourish_Slashing" "Target_BladeFlourish_Defensive" "Projectile_BladeFlourish_Defensive" "Target_BladeFlourish_Mobile" "Projectile_BladeFlourish_Mobile" -}}
{{ range $die, $DIE := $dice  }}

new entry "BARDIC_INSPIRATION_COMBAT{{$DIE}}"
type "StatusData"
data "StatusType" "BOOST"
using "BARDIC_INSPIRATION_COMBAT{{$DIE}}"
data "Passives" "CombatInspiration_Ability;CombatInspiration_Flourishes{{$DIE}}"

new entry "CombatInspiration_Flourishes{{$DIE}}"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "{{range $flourish := $flourishes}}UnlockSpell({{$flourish}}_Valor{{$DIE}});{{end}}"
data "StatsFunctorContext" "OnCast"
data "Conditions" "{{range $flourish := $flourishes}}SpellId('{{$flourish}}_Valor{{$DIE}}') | {{end}}SpellId('_')"
data "StatsFunctors" "RemoveStatus(SELF,BARDIC_INSPIRATION_COMBAT{{$DIE}})"

// new entry "Target_BladeFlourish_Valour_Container{{$DIE}}"
// type "SpellData"
// data "SpellType" "Target"
// data "SpellProperties" "Temporary"
// data "ContainerSpells" "{{range $flourish := $flourishes}}{{$flourish}}{{$DIE}};{{end}}"

new entry "Zone_BladeFlourish_Slashing_Valor{{$DIE}}"
type "SpellData"
data "SpellType" "Zone"
using "Zone_BladeFlourish_Slashing"
data "SpellSuccess" "DealDamage(MainMeleeWeapon+{{$die}}, MainWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon+{{$die}}, MainWeaponDamageType)"
data "SpellFlags" "IsHarmful;Temporary"
data "ExtraDescription" "h2912845egd877g47f7ga344g5dee380377c8"

new entry "Projectile_BladeFlourish_Slashing_Valor{{$DIE}}"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_BladeFlourish_Slashing"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon+{{$die}}), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand)"
data "TooltipDamageList" "DealDamage(MainRangedWeapon+{{$die}}, MainRangedWeaponDamageType)"
data "SpellFlags" "HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful;Temporary"
data "ExtraDescription" "h2912845egd877g47f7ga344g5dee380377c8"

new entry "Target_BladeFlourish_Defensive_Valor{{$DIE}}"
type "SpellData"
data "SpellType" "Target"
using "Target_BladeFlourish_Defensive"
data "SpellSuccess" "DealDamage(max(1,MainMeleeWeapon+{{$die}}), MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); ApplyStatus(SELF,BLADE_FLOURISH_DEFENSIVE,100,1)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon+{{$die}}, MainMeleeWeaponDamageType)"
data "SpellFlags" "IsMelee;IsHarmful;Temporary"
data "ExtraDescription" "h2912845egd877g47f7ga344g5dee380377c8"

new entry "Projectile_BladeFlourish_Defensive_Valor{{$DIE}}"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_BladeFlourish_Defensive"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon+{{$die}}), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); ApplyStatus(SELF,BLADE_FLOURISH_DEFENSIVE,100,1)"
data "TooltipDamageList" "DealDamage(MainRangedWeapon+{{$die}}, MainRangedWeaponDamageType)"
data "SpellFlags" "HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful;Temporary"
data "ExtraDescription" "h2912845egd877g47f7ga344g5dee380377c8"

new entry "Target_BladeFlourish_Mobile_Valor{{$DIE}}"
type "SpellData"
data "SpellType" "Target"
using "Target_BladeFlourish_Mobile"
data "SpellSuccess" "DealDamage(max(1,MainMeleeWeapon+{{$die}}), MainMeleeWeaponDamageType); ExecuteWeaponFunctors(MainHand); Force(6); ApplyStatus(BLADE_FLOURISH_MOBILE_TARGET,100,1); ApplyStatus(SELF,BLADE_FLOURISH_MOBILE,100,1)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon+{{$die}}, MainMeleeWeaponDamageType)"
data "SpellFlags" "IsMelee;IsHarmful;AddFallDamageOnLand;Temporary"
data "ExtraDescription" "h2912845egd877g47f7ga344g5dee380377c8"

new entry "Projectile_BladeFlourish_Mobile_Valor{{$DIE}}"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_BladeFlourish_Mobile"
data "SpellSuccess" "DealDamage(max(1,MainRangedWeapon+{{$die}}), MainRangedWeaponDamageType); ExecuteWeaponFunctors(MainHand); Force(6); ApplyStatus(BLADE_FLOURISH_MOBILE_TARGET,100,1); ApplyStatus(SELF,BLADE_FLOURISH_MOBILE,100,1)"
data "TooltipDamageList" "DealDamage(MainRangedWeapon+{{$die}}, MainRangedWeaponDamageType)"
data "SpellFlags" "HasHighGroundRangeExtension;RangeIgnoreVerticalThreshold;IsHarmful;AddFallDamageOnLand;Temporary"
data "ExtraDescription" "h2912845egd877g47f7ga344g5dee380377c8"
{{ end }}